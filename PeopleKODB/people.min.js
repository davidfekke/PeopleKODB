var db,PersonModel=function(){function n(n,t,i,r,u){this.id=n,this.firstName=t,this.lastName=i,this.phone=r,this.email=u}return n}(),AppViewModel=function(){function n(){var n=this;this.people=ko.observableArray(),this.key=ko.observable(""),this.firstName=ko.observable(""),this.lastName=ko.observable(""),this.phone=ko.observable(""),this.email=ko.observable(""),this.currentPerson=ko.computed(function(){return new PersonModel(n.key,n.firstName,n.lastName,n.phone,n.email)})}return n.prototype.addPerson=function(){var n=new PersonModel(this.key(),this.firstName(),this.lastName(),this.phone(),this.email()),i,t;this.people.push(n),i=db.transaction(["people"],"readwrite"),t=i.objectStore("people"),my.vm.key()===""?t.add({firstName:n.firstName,lastName:n.lastName,phone:n.phone,email:n.email}):t.put(n)},n.prototype.editPerson=function(n){my.vm.key(n.id),my.vm.firstName(n.firstName),my.vm.lastName(n.lastName),my.vm.phone(n.phone),my.vm.email(n.email)},n.prototype.deletePerson=function(n){db.transaction(["people"],"readwrite").objectStore("people").delete(n.id),my.vm.people.remove(function(t){return t.id===n.id})},n.prototype.clearPerson=function(){this.firstName(""),this.lastName(""),this.phone(""),this.email("")},n}(),getPeople=function(){var n=db.transaction(["people"],"readonly"),t=n.objectStore("people");t.openCursor().onsuccess=function(n){var i=n.target.result,t,r;i&&(console.dir(i),console.log(i.value.firstName),t=i.value,r=new PersonModel(t.id,t.firstName,t.lastName,t.phone,t.email),my.vm.people.push(r),i.continue())},n.oncomplete=function(){},n.onerror=function(n){console.dir(n)}},my={vm:new AppViewModel};$(function(){ko.applyBindings(my.vm);var n=indexedDB.open("peopleDB1",1);n.onupgradeneeded=function(n){var t=n.target.result;console.log("running onupgradeneeded"),t.objectStoreNames.contains("people")||t.createObjectStore("people",{keyPath:"id",autoIncrement:!0})},n.onsuccess=function(n){console.log("running onsuccess"),db=n.target.result,console.log("Current Object Stores"),console.dir(db.objectStoreNames),getPeople()},n.onerror=function(){}})